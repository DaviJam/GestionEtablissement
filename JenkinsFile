// Declarative //
pipeline {
	agent any
	stages {
		stage('Build') {
			steps {
				bat 'cd GestionEtablissement && mvn clean install'
			}
		}
		stage('Test') {
			steps {
				bat 'cd GestionEtablissement && mvn test'
			}
		}
		stage('Deploy') {
		steps {
            echo 'Deploying....'
             script {
                try {
                    deploy adapters: [tomcat10(credentialsId: '8be91146-a9b1-4fb3-8006-783fc927e8a6', url: 'http://localhost:8080/')], contextPath: '/EtablissementScolaire', war: '**/*.war'
                    } catch (err) {
                }
             }
        }
        }
	}
}


